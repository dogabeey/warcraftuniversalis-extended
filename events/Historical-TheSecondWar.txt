namespace = the_second_war

#Form Horde
country_event = {
	id = the_second_war.1
	title = horde_forming.title
	desc = {
		trigger = { has_global_flag = tfw_orc_victory_path }
		desc = horde_forming.desc.1
	}
	desc = {
		trigger = { has_global_flag = tfw_human_victory_path }
		desc = horde_forming.desc.2
	}
	picture = ORCISH_INVASION_eventPicture

    hidden = no
	fire_only_once = yes
	major = yes
    
	trigger = {
        current_age = the_second_war
	}
	
    mean_time_to_happen = {
		days = 1
    }
    
    immediate = {
    }
    
	option = {
		name = horde_forming.opt1
		if = {
			limit = {
				A41 = {
					total_development = 400
					is_subject = no
				}
			}
			A41 = {
				add_country_modifier = {
					name = horde_head
					duration = -1
				}			
				add_country_modifier = {
					name = horde_member
					duration = -1
				}			
			}
		}
		if = {
			limit = {
				NOT = {
					A41 = {
						total_development = 400
						is_subject = no
					}
				}
				any_country = {
					culture_group = culture_group_orc
					total_development = 300
					is_subject = no
				}
			}
			random_country = {
				limit = {
					culture_group = culture_group_orc
					total_development = 300
					is_subject = no
				}
				add_country_modifier = {
					name = horde_head
					duration = -1
				}	
				add_country_modifier = {
					name = horde_member
					duration = -1
				}	
			}
		}
    }
}
#Form Alliance
country_event = {
	id = the_second_war.2
	title = alliance_forming.title
	desc = {
		trigger = { has_global_flag = tfw_orc_victory_path }
		desc = alliance_forming.desc.1
	}
	desc = {
		trigger = { has_global_flag = tfw_human_victory_path }
		desc = alliance_forming.desc.2
	}
	picture = ORCISH_INVASION_eventPicture

    hidden = no
	fire_only_once = yes
	major = yes
    
	trigger = {
        current_age = the_second_war
	}
	
    mean_time_to_happen = {
		days = 1
    }
    
    immediate = {
    }
    
	option = {
		name = alliance_forming.opt1
		if = {
			limit = {
				A08 = {
					total_development = 400
					is_subject = no
				}
			}
			A08 = {
				add_country_modifier = {
					name = alliance_head
					duration = -1
				}		
				add_country_modifier = {
					name = alliance_member
					duration = -1
				}			
			}
		}
		if = {
			limit = {
				NOT = {
					A08 = {
						total_development = 400
						is_subject = no
					}
				}
				any_country = {
					culture_group = culture_group_human
					total_development = 400
					is_subject = no
				}
			}
			random_country = {
				limit = {
					culture_group = culture_group_human
					total_development = 400
					is_subject = no
				}
				add_country_modifier = {
					name = alliance_head
					duration = -1
				}	
				add_country_modifier = {
					name = alliance_member
					duration = -1
				}	
			}
		}
    }
}
#Demon soul
country_event = {
	id = the_second_war.4
	title = demon_soul_event.title
	desc = demon_soul_event.desc
	picture = ORCISH_INVASION_eventPicture

    hidden = no
	fire_only_once = yes
	major = no
    
	trigger = {
		current_age = the_second_war
		culture_group = culture_group_orc
        NOT = { has_country_modifier = demon_soul }
	}
	
    mean_time_to_happen = {
		months = 12
    }
    
    immediate = {
    }
    
	option = {
		name = demon_soul_event.opt1
		add_country_modifier = {
			name = demon_soul
			duration = 3650
		}
    }
}
#Beginning of Second War. Requires both faction leaders are at war with each other and each having at least three allies. 
country_event = {
	id = the_second_war.3
	title = the_second_war_starting.title
	desc = the_second_war_starting.desc
	picture = ORCISH_INVASION_eventPicture

    hidden = no
	fire_only_once = yes
	major = no
    
	trigger = {
		current_age = the_second_war
		OR = {
			has_country_modifier = alliance_member
			has_country_modifier = horde_member
		}
		any_country = {
			has_country_modifier = alliance_head
			any_country = {
				has_country_modifier = horde_head
				war_with = PREV
			}
		}
	}
	
    mean_time_to_happen = {
		months = 1
    }
    
    immediate = {
		set_global_flag = tsw_last_war_started
		random_country = {
			limit = {
				has_country_modifier = alliance_head
			}
			save_event_target_as = alliance_head_target
		}
		random_country = {
			limit = {
				has_country_modifier = horde_head
			}
			save_event_target_as = horde_head_target
		}
    }
    
	option = {
		name = the_second_war_starting.opt1 # FOR THE ALLIANCE
		trigger = {
			has_country_modifier = alliance_member
		}
    }
	option = {
		name = the_second_war_starting.opt2 # FOR THE HORDE
		trigger = {
			has_country_modifier = horde_member
		}
    }
	option = {
		name = the_second_war_starting.opt4 # I will stay away from this conflict
		trigger = {
			NOT = {
				has_country_modifier = horde_member
				has_country_modifier = alliance_member
				any_country = {
					has_country_modifier = alliance_head
					war_with = ROOT
				}
				any_country = {
					has_country_modifier = horde_head
					war_with = ROOT
				}
			}
		}
    }
	option = {
		name = the_second_war_starting.opt3 # FOR OURSELVES
		trigger = {
			NOT = {
				has_country_modifier = horde_member
				has_country_modifier = alliance_member
			}
			OR = {
				any_country = {
					has_country_modifier = alliance_head
					war_with = ROOT
				}
				any_country = {
					has_country_modifier = horde_head
					war_with = ROOT
				}
			}
		}
    }
}